# Global SSH Defaults
# Applied to ALL hosts unless overridden

Host *
    # === SECURITY ===
    # Always verify host keys on first connection
    StrictHostKeyChecking ask
    HashKnownHosts yes
    ChallengeResponseAuthentication no

    # Prefer public key auth, disable password by default
    PubkeyAuthentication yes
    # Uncomment to enforce (may break some legacy systems):
    # PasswordAuthentication no

    # Use only specified identity files (prevents trying all keys)
    IdentitiesOnly yes

    # Disable agent/X11 forwarding by default (enable per-host)
    ForwardAgent no
    ForwardX11 no

    # === PERFORMANCE & RELIABILITY ===
    # Keep connections alive (detect dead connections)
    ServerAliveInterval 60
    ServerAliveCountMax 3
    TCPKeepAlive yes

    # Compress data for slow connections
    Compression yes

    # === CONNECTION MULTIPLEXING ===
    # Reuse connections for speed (requires socket directory)
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h:%p
    ControlPersist 10m

    # === KEY MANAGEMENT ===
    # Add keys to agent automatically (cross-platform safe here)
    AddKeysToAgent yes

    # === LOGGING ===
    LogLevel INFO

    # === MODERN CRYPTOGRAPHY ===
    # Prefer strong, modern algorithms
    HostKeyAlgorithms ssh-ed25519,rsa-sha2-512,rsa-sha2-256
    KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512
    Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
    MACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512,hmac-sha2-256
